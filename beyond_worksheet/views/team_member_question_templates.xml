<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="swms_repoart" name="SWMS Report">
        <t t-call="portal.portal_layout">
            <div class="container swms_report">
                <form action="" id="checkin_form">
                    <div class="d-flex">
                        <input type="hidden" name="worksheet_id" t-att-value="worksheet" id="worksheet_id"/>
                        <input type="hidden" name="member_id" t-att-value="member" id="member"/>
                        <h1>SWMS Report</h1>
                    </div>
                    <div>
                        <t t-if="worksheet.cranes_ids">
                            <h2 style="color: #4CAF50; font-size: 24px; margin-bottom: 10px;">Cranes</h2>
                            <ul style="list-style-type: square; padding-left: 20px;">
                                <t t-foreach="worksheet.cranes_ids" t-as="crane" t-key="crane.id">
                                    <li style="font-size: 18px; color: #333; margin-bottom: 5px;">
                                        <t t-out="crane.name"/>
                                    </li>
                                </t>
                            </ul>
                        </t>
                        <t t-if="worksheet.hoists_ids">
                            <h2 style="color: #4CAF50; font-size: 24px; margin-bottom: 10px;">Hoist</h2>
                            <ul style="list-style-type: square; padding-left: 20px;">
                                <t t-foreach="worksheet.hoists_ids" t-as="hoists" t-key="hoists.id">
                                    <li style="font-size: 18px; color: #333; margin-bottom: 5px;">
                                        <t t-out="hoists.name"/>
                                    </li>
                                </t>
                            </ul>
                        </t>
                        <t t-if="worksheet.scaffolding_ids">
                            <h2 style="color: #4CAF50; font-size: 24px; margin-bottom: 10px;">Scaffolding</h2>
                            <ul style="list-style-type: square; padding-left: 20px;">
                                <t t-foreach="worksheet.scaffolding_ids" t-as="scaffolding" t-key="scaffolding.id">
                                    <li style="font-size: 18px; color: #333; margin-bottom: 5px;">
                                        <t t-out="scaffolding.name"/>
                                    </li>
                                </t>
                            </ul>
                        </t>
                        <t t-if="worksheet.dogging_rigging_ids">
                            <h2 style="color: #4CAF50; font-size: 24px; margin-bottom: 10px;">Dogging Rigging</h2>
                            <ul style="list-style-type: square; padding-left: 20px;">
                                <t t-foreach="worksheet.dogging_rigging_ids" t-as="dogging_rigging"
                                   t-key="dogging_rigging.id">
                                    <li style="font-size: 18px; color: #333; margin-bottom: 5px;">
                                        <t t-out="dogging_rigging.name"/>
                                    </li>
                                </t>
                            </ul>
                        </t>
                        <t t-if="worksheet.forklift_ids">
                            <h2 style="color: #4CAF50; font-size: 24px; margin-bottom: 10px;">Forklift Rigging</h2>
                            <ul style="list-style-type: square; padding-left: 20px;">
                                <t t-foreach="worksheet.forklift_ids" t-as="forklift" t-key="forklift.id">
                                    <li style="font-size: 18px; color: #333; margin-bottom: 5px;">
                                        <t t-out="forklift.name"/>
                                    </li>
                                </t>
                            </ul>
                        </t>
                    </div>
                    <div class="d-flex justify-content-center align-items-center">
                        <a t-attf-href="/my/questions/#{worksheet.id}/#{member}"
                           class="btn btn-primary">
                            Next
                        </a>
                    </div>
                </form>
            </div>
        </t>
    </template>

    <!-- templates/completion_page.xml -->
    <template id="portal_team_member_checkin_completed" name="Check-in Completed">
        <t t-call="portal.portal_layout">
            <div class="container">
                <t t-if="is_same_location">
                    <h2>Check-In Already Recorded at This Location</h2>
                    <p>Please proceed to a different location to check in again.</p>
                </t>
                <t t-else="">
                    <h2>Check-in Completed</h2>
                    <p>Your check-in has been successfully completed.</p>
                    <a t-attf-href="/team/member/checkout/{{worksheet}}/{{member}}">Check-out</a>

                </t>
            </div>
        </t>
    </template>
    <template id="portal_team_member_checkout" name="Check-out Completed">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h2>Check-Out Completed</h2>
                <p>Thank you!</p>
            </div>
        </t>
    </template>

    <template id="portal_team_member_signature" name="Member Signature">
        <div class="member_signature">
            <div class="container ">
                <div class="modal fade" id="teamSignModals" tabindex="-1"
                     role="dialog"
                     aria-labelledby="teamSignModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title"
                                    id="clientSignModalLabel">Initial Client
                                    Signature
                                </h5>
                                <button type="button" class="close"
                                        data-bs-dismiss="modal"
                                        aria-label="Close">
                                    <span aria-hidden="true">x</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <t t-call="portal.signature_form">
                                    <t t-set="call_url"
                                       t-value="'/my/worksheet/' + str(worksheet_id.id) +'/'+str(survey_id.id) +'/signature/check'"/>
                                    <t t-set="default_name"
                                       t-value="member_id.name"
                                       t-if="member_id.name"
                                    />
                                    <t t-set="default_name" t-value="' '"
                                    />
                                    <t t-set="mode" t-value="'draw'"/>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
                <input type="hidden" name="worksheet_id" t-att-value="worksheet_id.id" id="worksheet_id"/>
                <input type="hidden" name="member_id" id="member" t-att-value="member_id.id"/>
                <input type="hidden" name="survey_id" id="survey_worksheet" t-att-value="survey_id.id"/>
                <div class="col-sm-auto mt8">
                    <a role="button" class=" upload_member_btn_signature btn btn-primary"
                       data-bs-toggle="modal" data-bs-target="#teamSignModals"
                       href="#">
                        <i class="fa fa-check"/>
                        <t>Upload Signature</t>
                    </a>
                </div>
                <br/>
            </div>
        </div>
    </template>

</odoo>